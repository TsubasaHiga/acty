---
/**
 * 画像圧縮などは一切行わない<Picture>タグラッパー
 * 使い方
 * <SimplePicture
 *   className="image"
 *   alt=""
 *   src="/assets/images/img__lg.jpg"
 *   srcset={{
 *     sm: [
 *      '/assets/images/img__sm.jpg 1x',
 *      '/assets/images/img__sm@2x.jpg 2x',
 *      '/assets/images/img__sm@3x.jpg 3x'
 *     ],
 *     lg: [
 *      '/assets/images/img__lg.jpg 1x',
 *      '/assets/images/img__lg@2x.jpg 2x'
 *     ],
 *   }}
 * />
 */

import { values } from '@const/values'

export type SrcsetType = {
  sm: string[]
  lg: string[]
}

export interface Props {
  className?: string
  lazy?: boolean
  alt: string
  src: string
  srcset: SrcsetType
}
const { className, lazy = true, alt, src, srcset, ...attr } = Astro.props
---

<picture class={className} {...attr}>
  <source media={`(max-width: ${values.BREAKPOINT}px)`} srcset={srcset.sm.join(',')} />
  <source media={`(min-width: ${values.BREAKPOINT + 1}px)`} srcset={srcset.lg.join(',')} />
  <img src={src} alt={alt} loading={lazy ? 'lazy' : 'eager'} />
</picture>
